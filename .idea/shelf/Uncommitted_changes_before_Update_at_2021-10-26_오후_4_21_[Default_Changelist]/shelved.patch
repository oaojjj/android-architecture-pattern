Index: app/src/main/java/com/oaojjj/architecturepattern/frgment/ActiveListFragment.kt
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/java/com/oaojjj/architecturepattern/frgment/ActiveListFragment.kt b/app/src/main/java/com/oaojjj/architecturepattern/todos/TodosFragment.kt
rename from app/src/main/java/com/oaojjj/architecturepattern/frgment/ActiveListFragment.kt
rename to app/src/main/java/com/oaojjj/architecturepattern/todos/TodosFragment.kt
--- a/app/src/main/java/com/oaojjj/architecturepattern/frgment/ActiveListFragment.kt	(revision 00c4eb8eeff300adcd9aa416251db50a71c73d8f)
+++ b/app/src/main/java/com/oaojjj/architecturepattern/todos/TodosFragment.kt	(date 1635231626475)
@@ -1,6 +1,5 @@
-package com.oaojjj.architecturepattern.frgment
+package com.oaojjj.architecturepattern.todos
 
-import android.content.Context
 import android.os.Bundle
 import android.util.Log
 import androidx.fragment.app.Fragment
@@ -15,18 +14,19 @@
 import com.oaojjj.architecturepattern.MainActivity
 import com.oaojjj.architecturepattern.R
 import com.oaojjj.architecturepattern.adapter.TodoAdapter
-import com.oaojjj.architecturepattern.databinding.FragmentActiveListBinding
 import com.oaojjj.architecturepattern.model.TodoModel
 
 import com.oaojjj.architecturepattern.controller.SwipeController
 import com.oaojjj.architecturepattern.customview.UnderlayButton
+import com.oaojjj.architecturepattern.databinding.FragmentTodosBinding
+import com.oaojjj.architecturepattern.frgment.UpdateTodoDialog
 import com.oaojjj.architecturepattern.listener.OnTodoCheckBoxClickListener
 import com.oaojjj.architecturepattern.listener.OnUnderlayButtonClickListener
 import com.oaojjj.architecturepattern.listener.OnUpdateTodoListener
 
 
-class ActiveListFragment : Fragment(), OnTodoCheckBoxClickListener {
-    private lateinit var binding: FragmentActiveListBinding
+class TodosFragment : Fragment(), OnTodoCheckBoxClickListener {
+    private lateinit var binding: FragmentTodosBinding
 
     // itemTouchHelper
     private lateinit var itemTouchHelper: ItemTouchHelper
@@ -38,7 +38,7 @@
         savedInstanceState: Bundle?
     ): View? {
         Log.d("ActiveListFragment_TAG", "onCreateView: ")
-        binding = FragmentActiveListBinding.inflate(inflater, container, false)
+        binding = FragmentTodosBinding.inflate(inflater, container, false)
         return binding.root
     }
 
@@ -50,7 +50,7 @@
         mAdapter =
             TodoAdapter(requireContext(), TodoModel.getDataList())
                 .apply {
-                    setOnTodoCheckBoxListener(this@ActiveListFragment)
+                    setOnTodoCheckBoxListener(this@TodosFragment)
                 }
         binding.rvTodo.let {
             it.adapter = mAdapter
Index: app/src/main/java/com/oaojjj/architecturepattern/MainActivity.kt
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.oaojjj.architecturepattern\r\n\r\nimport android.os.Bundle\r\nimport android.os.Handler\r\nimport android.os.Looper\r\nimport android.util.Log\r\nimport android.view.Menu\r\nimport android.view.MenuItem\r\nimport android.view.View\r\nimport androidx.appcompat.app.AppCompatActivity\r\nimport androidx.core.content.ContextCompat\r\nimport androidx.fragment.app.FragmentManager\r\nimport com.google.android.material.appbar.AppBarLayout\r\nimport com.google.android.material.bottomappbar.BottomAppBar\r\nimport com.oaojjj.architecturepattern.databinding.ActivityMainBinding\r\nimport com.oaojjj.architecturepattern.frgment.ActiveListFragment\r\nimport com.oaojjj.architecturepattern.frgment.AddTodoFragment\r\nimport com.oaojjj.architecturepattern.listener.OnFinishedAddTodoListener\r\nimport com.oaojjj.architecturepattern.model.TodoModel\r\n\r\n// 안드로이드에서 MVC 구조는 activity(or fragment)가 controller 와 view 의 역할을 수행한다.\r\n// view는 xml_layout 자체이다.\r\nclass MainActivity : AppCompatActivity(), View.OnClickListener {\r\n    private var menuVisible: Boolean = false\r\n    private lateinit var bottomAppBar: BottomAppBar\r\n    private lateinit var appBarLayout: AppBarLayout\r\n\r\n    private lateinit var binding: ActivityMainBinding\r\n    private var changeViewFlag = true\r\n\r\n    // fragment instance\r\n    private var activeListFragment = ActiveListFragment()\r\n    private lateinit var addTodoFragment: AddTodoFragment\r\n\r\n    // listener\r\n    private lateinit var finishedAddTodoListener: OnFinishedAddTodoListener\r\n\r\n    override fun onCreate(savedInstanceState: Bundle?) {\r\n        super.onCreate(savedInstanceState)\r\n        binding = ActivityMainBinding.inflate(layoutInflater)\r\n\r\n        // setting appbar\r\n        setSupportActionBar(binding.toolbar)\r\n        bottomAppBar = binding.babMain\r\n        appBarLayout = binding.appBarLayout\r\n\r\n        // model\r\n        Thread { TodoModel.setContext(applicationContext) }.start()\r\n\r\n        // view, controller\r\n        setContentView(binding.root)\r\n\r\n        // set listener\r\n        binding.fabMain.setOnClickListener(this)\r\n\r\n        createActiveListFragment()\r\n    }\r\n\r\n    override fun onClick(view: View) {\r\n        Log.d(\"MainActivity\", \"onClick: ${supportFragmentManager.backStackEntryCount}\")\r\n        when (changeViewFlag) {\r\n            true -> {\r\n                createAddTodoFragment()\r\n                changeBottomAnimation(R.drawable.check, BottomAppBar.FAB_ALIGNMENT_MODE_END)\r\n            }\r\n            false -> {\r\n                onFinishedAddTodo()\r\n                changeBottomAnimation(R.drawable.add, BottomAppBar.FAB_ALIGNMENT_MODE_CENTER)\r\n            }\r\n        }\r\n    }\r\n\r\n    private fun createActiveListFragment() {\r\n        showOptionMenu(false)\r\n        supportFragmentManager.beginTransaction()\r\n            .add(R.id.fl_container_main, activeListFragment)\r\n            .commit()\r\n    }\r\n\r\n    // Todo를 추가할 수 있는 Fragment 생성\r\n    private fun createAddTodoFragment() {\r\n        expendedAppBarLayout()\r\n        showOptionMenu(true)\r\n\r\n        addTodoFragment = AddTodoFragment().apply { finishedAddTodoListener = this }\r\n        supportFragmentManager.beginTransaction()\r\n            .addToBackStack(\"addTodoFragment\")\r\n            .setCustomAnimations(\r\n                R.anim.enter_from_left,\r\n                R.anim.exit_to_right,\r\n                R.anim.enter_from_right,\r\n                R.anim.exit_to_left\r\n            ).replace(R.id.fl_container_main, addTodoFragment).commit()\r\n\r\n        Log.d(\"main\", \"onAddTodo: ${supportFragmentManager.backStackEntryCount}\")\r\n    }\r\n\r\n    private fun onFinishedAddTodo() {\r\n        finishedAddTodoListener.onFinishedAddTodo()\r\n\r\n        supportFragmentManager.popBackStack(\r\n            \"addTodoFragment\", FragmentManager.POP_BACK_STACK_INCLUSIVE\r\n        )\r\n    }\r\n\r\n    /**\r\n     *  change bottom fab position(fab, bottomAbbBar)\r\n     */\r\n    private fun changeBottomAnimation(ResId: Int, fabAlignmentMode: Int) {\r\n        changeViewFlag = !changeViewFlag\r\n        binding.babMain.fabAlignmentMode = fabAlignmentMode\r\n        Handler(Looper.getMainLooper()).apply {\r\n            postDelayed({\r\n                binding.fabMain.setImageDrawable(\r\n                    ContextCompat.getDrawable(this@MainActivity, ResId)\r\n                )\r\n            }, 300)\r\n        }\r\n\r\n    }\r\n\r\n    override fun onCreateOptionsMenu(menu: Menu?): Boolean {\r\n        menuInflater.inflate(R.menu.menu_todo, menu)\r\n        val menuItem = menu?.findItem(R.id.save_todo)\r\n\r\n        return if (menuVisible) {\r\n            menuItem?.isVisible = true\r\n            true\r\n        } else {\r\n            menuItem?.isVisible = false\r\n            false\r\n        }\r\n    }\r\n\r\n    override fun onOptionsItemSelected(item: MenuItem): Boolean {\r\n        return when (item.itemId) {\r\n            android.R.id.home -> {\r\n                onBackPressed()\r\n                true\r\n            }\r\n            R.id.save_todo -> {\r\n                onFinishedAddTodo()\r\n                changeBottomAnimation(R.drawable.add, BottomAppBar.FAB_ALIGNMENT_MODE_CENTER)\r\n                true\r\n            }\r\n            else -> super.onOptionsItemSelected(item)\r\n        }\r\n    }\r\n\r\n    // fragment에서 뒤로가기 눌렀을 때 호출된다.\r\n    // 현재는 AddTodoFragment 한개에서만 호출되서 따로 인터페이스 구현은 안해도 될듯?\r\n    override fun onBackPressed() {\r\n        if (!changeViewFlag)\r\n            changeBottomAnimation(R.drawable.add, BottomAppBar.FAB_ALIGNMENT_MODE_CENTER)\r\n        super.onBackPressed()\r\n    }\r\n\r\n    /**\r\n     * control appbar\r\n     * 상단 액션바, 하단 바텀바 - view 조작\r\n     */\r\n    fun showBottomAppBar() {\r\n        bottomAppBar.behavior.slideUp(bottomAppBar)\r\n    }\r\n\r\n    fun hideBottomAppBar() {\r\n        bottomAppBar.behavior.slideDown(bottomAppBar)\r\n    }\r\n\r\n    fun expendedAppBarLayout() {\r\n        appBarLayout.setExpanded(true)\r\n    }\r\n\r\n    fun collapsedAppBarLayout() {\r\n        appBarLayout.setExpanded(false)\r\n    }\r\n\r\n    fun showOptionMenu(isShow: Boolean) {\r\n        invalidateOptionsMenu()\r\n        menuVisible = isShow\r\n    }\r\n}
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/java/com/oaojjj/architecturepattern/MainActivity.kt b/app/src/main/java/com/oaojjj/architecturepattern/MainActivity.kt
--- a/app/src/main/java/com/oaojjj/architecturepattern/MainActivity.kt	(revision 00c4eb8eeff300adcd9aa416251db50a71c73d8f)
+++ b/app/src/main/java/com/oaojjj/architecturepattern/MainActivity.kt	(date 1635231645325)
@@ -13,7 +13,7 @@
 import com.google.android.material.appbar.AppBarLayout
 import com.google.android.material.bottomappbar.BottomAppBar
 import com.oaojjj.architecturepattern.databinding.ActivityMainBinding
-import com.oaojjj.architecturepattern.frgment.ActiveListFragment
+import com.oaojjj.architecturepattern.todos.TodosFragment
 import com.oaojjj.architecturepattern.frgment.AddTodoFragment
 import com.oaojjj.architecturepattern.listener.OnFinishedAddTodoListener
 import com.oaojjj.architecturepattern.model.TodoModel
@@ -29,7 +29,7 @@
     private var changeViewFlag = true
 
     // fragment instance
-    private var activeListFragment = ActiveListFragment()
+    private var todosFragment = TodosFragment()
     private lateinit var addTodoFragment: AddTodoFragment
 
     // listener
@@ -73,7 +73,7 @@
     private fun createActiveListFragment() {
         showOptionMenu(false)
         supportFragmentManager.beginTransaction()
-            .add(R.id.fl_container_main, activeListFragment)
+            .add(R.id.fl_container_main, todosFragment)
             .commit()
     }
 
Index: app/src/main/res/layout/fragment_active_list.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/res/layout/fragment_active_list.xml b/app/src/main/res/layout/fragment_todos.xml
rename from app/src/main/res/layout/fragment_active_list.xml
rename to app/src/main/res/layout/fragment_todos.xml
--- a/app/src/main/res/layout/fragment_active_list.xml	(revision 00c4eb8eeff300adcd9aa416251db50a71c73d8f)
+++ b/app/src/main/res/layout/fragment_todos.xml	(date 1635231626457)
@@ -5,7 +5,7 @@
     android:layout_width="match_parent"
     android:layout_height="match_parent"
     android:background="@android:color/white"
-    tools:context=".frgment.ActiveListFragment">
+    tools:context=".todos.TodosFragment">
 
     <androidx.recyclerview.widget.RecyclerView
         android:id="@+id/rv_todo"
Index: app/src/main/java/com/oaojjj/architecturepattern/todos/TodosPresenter.kt
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/java/com/oaojjj/architecturepattern/todos/TodosPresenter.kt b/app/src/main/java/com/oaojjj/architecturepattern/todos/TodosPresenter.kt
new file mode 100644
--- /dev/null	(date 1635232790989)
+++ b/app/src/main/java/com/oaojjj/architecturepattern/todos/TodosPresenter.kt	(date 1635232790989)
@@ -0,0 +1,9 @@
+package com.oaojjj.architecturepattern.todos
+
+class TodosPresenter : TodosContract.Presenter {
+    private var todosView: TodosContract.View? = null
+
+    override fun setView(view: TodosContract.View) {
+        todosView = view
+    }
+}
\ No newline at end of file
Index: app/src/main/java/com/oaojjj/architecturepattern/todos/TodosContract.kt
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/java/com/oaojjj/architecturepattern/todos/TodosContract.kt b/app/src/main/java/com/oaojjj/architecturepattern/todos/TodosContract.kt
new file mode 100644
--- /dev/null	(date 1635232577058)
+++ b/app/src/main/java/com/oaojjj/architecturepattern/todos/TodosContract.kt	(date 1635232577058)
@@ -0,0 +1,11 @@
+package com.oaojjj.architecturepattern.todos
+
+interface TodosContract {
+    interface View {
+
+    }
+
+    interface Presenter {
+        fun setView(view: View)
+    }
+}
\ No newline at end of file
